(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{227:function(t,a,e){"use strict";e.r(a);var i=e(321),s=e(257);for(var n in s)"default"!==n&&function(t){e.d(a,t,function(){return s[t]})}(n);var o=e(3),l=Object(o.a)(s.default,i.a,i.b,!1,null,"4b23dd42",null);a.default=l.exports},257:function(t,a,e){"use strict";e.r(a);var i=e(258),s=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);a.default=s.a},258:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i,s=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},n=function(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e]);return a.default=t,a}(e(97)),o=e(298),l=(i=o)&&i.__esModule?i:{default:i};a.default={components:{Detail:l.default},data:function(){return{detailDialog:!1,detail:null,searchData:{name:"",liaisons:"",phone:"",manager_name:""},list:null,page:{offset:10,total:6,num:1}}},mounted:function(){this.init()},methods:{init:function(){this.getList()},getList:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=s({pageNum:a,pageOffset:this.page.offset},this.searchData);return n.getList(e).then(function(a){t.list=a.data,t.page=a.page})},currentChange:function(t){this.getList(t)},openDetailDialog:function(){this.detailDialog=!0},getDetail:function(t){var a=this;n.detail({id:t.id}).then(function(t){a.detail=t.data,a.detailDialog=!0})},add:function(){this.detail=null,this.detailDialog=!0},forbid:function(t,a){var e=this;this.$confirm(a+"该用户，该用户的系统将处于"+a+"状态?").then(function(a){n.disabled(t).then(function(a){e.$message.success("操作成功!"),t.status=!t.status})})},buttonClickHandler:function(t,a){var e=this,i=t.target.title;switch(i){case"禁用":case"启用":this.forbid(a,i);break;case"删除":this.$confirm("删除将删除该用户全部数据,危险操作!").then(function(t){e.$confirm("再次确认!").then(function(t){n.del(a).then(function(t){return e.getList()})})});break;case"详情":this.getDetail(a)}},detailSave:function(t){this.detailDialog=!1,this.getList()},checkAll:function(t){this.$checkAll(t)},formatType:function(t){return t.join(", ")}}}},259:function(t,a,e){"use strict";e.r(a);var i=e(260),s=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,function(){return i[t]})}(n);a.default=s.a},260:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=n(e(95)),s=n(e(97));function n(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e]);return a.default=t,a}a.default={props:["isVis","detail"],created:function(){this.localVis=this.isVis,this.detail&&(this.data=this.detail),this.initAuthority()},data:function(){return{data:{type:[],apps:[]},authority:{publish:"",read:"",data:"",teach:""},localVis:!1}},methods:{addLicensePic:function(){},picChangeHandler:function(t){var a=this,e=t.target.files[0];e&&(this.$loading(),i.getTask(e).then(function(t){a.$loadingClose(),a.data.license=t.data.path,a.$set(a.data,"license_src",t.data.url)}))},addApp:function(){this.data.apps.push({name:"",read_front_uri:""})},delApp:function(t,a){var e=this;this.$confirm("是否删除?").then(function(i){a.id?s.delFlat(a).then(function(a){e.data.apps.splice(t,1)}):e.data.apps.splice(t,1)})},initAuthority:function(){var t=this;this.data.type&&this.data.type.forEach(function(a){t.authority[a]=!0})},authorize:function(t){this.authority[t]=!this.authority[t]},save:function(){var t=this;s.save(this.data).then(function(a){t.$emit("save",!0)},function(a){log(a),t.$message.error(a.toString())})}},watch:{isVis:function(){this.localVis=this.isVis}}}},261:function(t,a,e){},298:function(t,a,e){"use strict";e.r(a);var i=e(325),s=e(259);for(var n in s)"default"!==n&&function(t){e.d(a,t,function(){return s[t]})}(n);e(299);var o=e(3),l=Object(o.a)(s.default,i.a,i.b,!1,null,"e4ad1218",null);a.default=l.exports},299:function(t,a,e){"use strict";var i=e(261);e.n(i).a},321:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"comps"},[t.detailDialog?e("Detail",{attrs:{detail:t.detail,isVis:t.detailDialog},on:{save:t.detailSave,"update:isVis":function(a){t.detailDialog=a},"update:is-vis":function(a){t.detailDialog=a}}}):t._e()],1),e("div",{staticClass:"content-wrap"},[e("div",{staticClass:"content"},[e("div",{staticClass:"search",on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.getList()}}},[e("form",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.name,expression:"searchData.name"}],staticClass:"form-control",attrs:{placeholder:"出版社名称"},domProps:{value:t.searchData.name},on:{input:function(a){a.target.composing||t.$set(t.searchData,"name",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.liaisons,expression:"searchData.liaisons"}],staticClass:"form-control",attrs:{placeholder:"联系人"},domProps:{value:t.searchData.liaisons},on:{input:function(a){a.target.composing||t.$set(t.searchData,"liaisons",a.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.phone,expression:"searchData.phone"}],staticClass:"form-control",attrs:{placeholder:"电话"},domProps:{value:t.searchData.phone},on:{input:function(a){a.target.composing||t.$set(t.searchData,"phone",a.target.value)}}}),e("div",{staticClass:"seatch-btns"},[e("el-button",{attrs:{plain:"",icon:"el-icon-search",size:"medium",type:"primary"},on:{click:function(a){return t.getList()}}},[t._v("搜索")]),e("el-button",{attrs:{icon:"el-icon-plus",size:"medium",type:"primary"},on:{click:t.add}},[t._v("新建  ")])],1)])]),t.list?e("div",{staticClass:"table-warp"},[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",{attrs:{width:"60"}},[e("input",{attrs:{type:"checkbox"},on:{click:function(a){return t.checkAll(a)}}})]),e("th",[t._v("出版社名称")]),e("th",[t._v("联系人")]),e("th",[t._v("电话")]),e("th",[t._v("权限")]),e("th",[t._v("操作")])])]),e("tbody",t._l(t.list,function(a){return e("tr",{key:a.id},[e("th",[e("input",{ref:"inps",refInFor:!0,attrs:{type:"checkbox"}})]),e("th",[e("div",{staticClass:"ell"},[t._v(t._s(a.name))])]),e("th",[e("div",{staticClass:"el"},[t._v(t._s(a.liaisons)+"   ")])]),e("th",[e("div",{staticClass:"ell"},[t._v(t._s(a.phone)+"    ")])]),e("th",[a.type?e("div",{staticClass:"ell"},[t._v(t._s(a.type.join(", "))+"   ")]):t._e()]),e("th",[e("div",{staticClass:"table-btns",on:{click:function(e){return t.buttonClickHandler(e,a)}}},[e("span",{staticClass:"icon icon-pass",attrs:{title:1*a.status?"禁用":"启用"}}),e("span",{staticClass:"icon icon-delete",attrs:{title:"删除"}}),e("span",{staticClass:"icon icon-detail",attrs:{title:"详情"}})])])])}),0)]),t.page.total?e("div",{staticClass:"pages"},[e("Pages",{attrs:{currentPage:t.page.num,total:t.page.total,pageSize:t.page.offset,pageSizes:[t.page.offset,20,50,100]},on:{currentChange:t.currentChange}})],1):t._e()]):t._e()])])])},s=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return s})},325:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-dialog",{attrs:{visible:t.localVis,width:"1200px"},on:{"update:visible":function(a){t.localVis=a},closed:function(a){return t.$emit("update:isVis",t.localVis)}}},[t.data?e("div",{staticClass:"content"},[e("div",{staticClass:"base fix"},[e("div",{staticClass:"tname"},[t._v("基本信息 ")]),e("div",{staticClass:"form-group"},[e("label",[t._v("出版社名称")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control",attrs:{placeholder:"必填"},domProps:{value:t.data.name},on:{input:function(a){a.target.composing||t.$set(t.data,"name",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("出版社地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.address,expression:"data.address"}],staticClass:"form-control",domProps:{value:t.data.address},on:{input:function(a){a.target.composing||t.$set(t.data,"address",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("联系方式")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.phone,expression:"data.phone"}],staticClass:"form-control",domProps:{value:t.data.phone},on:{input:function(a){a.target.composing||t.$set(t.data,"phone",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("联系邮箱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.email,expression:"data.email"}],staticClass:"form-control",domProps:{value:t.data.email},on:{input:function(a){a.target.composing||t.$set(t.data,"email",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",[t._v("联系人")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.data.liaisons,expression:"data.liaisons"}],staticClass:"form-control",domProps:{value:t.data.liaisons},on:{input:function(a){a.target.composing||t.$set(t.data,"liaisons",a.target.value)}}})]),e("div",{staticClass:"right"},[e("span",{staticClass:"pname"},[t._v("营业执照 :")]),e("Btn",{on:{click:function(a){return t.$refs.picFile.click()}}},[t._v("选择文件"),e("input",{ref:"picFile",staticClass:"hide",attrs:{type:"file",accept:t.$config.imgAccept},on:{change:t.picChangeHandler}})]),e("br"),e("img",{attrs:{src:t.data.license_src}})],1)]),e("div",{staticClass:"base sys"},[e("div",{staticClass:"tname"},[t._v("系统信息")]),e("span",{staticClass:"sys-list-name"},[t._v("系统列表  ")]),e("div",{staticClass:"xlist"},[t._l(t.data.apps,function(a,i){return t.data.apps?e("div",{staticClass:"item"},[e("div",{staticClass:"form-group"},[e("label",[t._v("平台名称")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.name,expression:"i.name"}],staticClass:"form-control",domProps:{value:a.name},on:{input:function(e){e.target.composing||t.$set(a,"name",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"url"},[t._v("x-read前端二级域名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.subdomain,expression:"i.subdomain"}],staticClass:"form-control",domProps:{value:a.subdomain},on:{input:function(e){e.target.composing||t.$set(a,"subdomain",e.target.value)}}})]),e("span",{staticClass:"icon icon-delete",on:{click:function(e){return t.delApp(i,a)}}})]):t._e()}),e("div",{staticClass:"fix"},[e("div",{staticClass:"add-btn"},[e("Btn",{on:{click:t.addApp}},[t._v("新增  ")])],1)])],2),e("div",{staticClass:"authority"})]),e("div",{staticClass:"bottom"},[e("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存        ")])],1)]):t._e()])],1)},s=[];e.d(a,"a",function(){return i}),e.d(a,"b",function(){return s})}}]);