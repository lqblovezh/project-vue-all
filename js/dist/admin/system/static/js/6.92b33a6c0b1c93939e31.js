(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{581:function(e,t,a){"use strict";a.r(t);var n=a(670),i=a(617);for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);a(657);var l=a(25),s=Object(l.a)(i.default,n.a,n.b,!1,null,"0ad24be2",null);t.default=s.exports},589:function(e,t){var a=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,i=/(\[[^\[\]]*\])/g;function r(e,t,a){if(t.match(i)){!function e(t,a,n){if(0===a.length)return t=n;var i=a.shift(),r=i.match(/^\[(.+?)\]$/);if("[]"===i)return t=t||[],Array.isArray(t)?t.push(e(null,a,n)):(t._values=t._values||[],t._values.push(e(null,a,n))),t;if(r){var l=r[1],s=+l;isNaN(s)?(t=t||{})[l]=e(t[l],a,n):(t=t||[])[s]=e(t[s],a,n)}else t[i]=e(t[i],a,n);return t}(e,function(e){var t=[],a=new RegExp(i),n=/^([^\[\]]*)/.exec(e);for(n[1]&&t.push(n[1]);null!==(n=a.exec(e));)t.push(n[1]);return t}(t),a)}else{var n=e[t];n?(Array.isArray(n)||(e[t]=[n]),e[t].push(a)):e[t]=a}return e}function l(e,t,a){return a=a.replace(/(\r)?\n/g,"\r\n"),a=(a=encodeURIComponent(a)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+a}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var i=t.hash?{}:"",s=t.serializer||(t.hash?r:l),o=e&&e.elements?e.elements:[],u=Object.create(null),c=0;c<o.length;++c){var d=o[c];if((t.disabled||!d.disabled)&&d.name&&n.test(d.nodeName)&&!a.test(d.type)){var p=d.name,f=d.value;if("checkbox"!==d.type&&"radio"!==d.type||d.checked||(f=void 0),t.empty){if("checkbox"!==d.type||d.checked||(f=""),"radio"===d.type&&(u[d.name]||d.checked?d.checked&&(u[d.name]=!0):u[d.name]=!1),void 0==f&&"radio"==d.type)continue}else if(!f)continue;if("select-multiple"!==d.type)i=s(i,p,f);else{f=[];for(var m=d.options,h=!1,g=0;g<m.length;++g){var v=m[g],_=t.empty&&!v.value,b=v.value||_;v.selected&&b&&(h=!0,i=t.hash&&"[]"!==p.slice(p.length-2)?s(i,p+"[]",v.value):s(i,p,v.value))}!h&&t.empty&&(i=s(i,p,""))}}}if(t.empty)for(var p in u)u[p]||(i=s(i,p,""));return i}},592:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.listRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/manager/roles",e)},t.listManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/manager/managers",e)},t.addManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/manager/managers",e)},t.modifyManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=o(e,["id"]);return(0,r.request_put)(u({id:t}),a)},t.detailManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=o(e,["id"]);return(0,r.request_get)(u({id:t}),a)},t.detailRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=o(e,["id"]);return t?(0,r.request_get)(c({id:t}),a).then(function(e){if(e.status)return d().then(function(t){return t.data.publish=t.data.publish.map(function(t){return Object.keys(e.data.accesses).includes(t.id)?n({},t,e.data.accesses[t.id]):t}),t.data.read=t.data.read.map(function(t){return Object.keys(e.data.accesses).includes(t.id)?n({},t,e.data.accesses[t.id]):t}),t})}):p()},t.allJurisdiction=d,t._allJurisdiction=p,t.role=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=o(e,["id"]);if(t)return(0,r.request_put)(c({id:t}),a);return(0,r.request_post)("/common/manager/roles",a)},t.addRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/manager/roles",e)},t.deleteManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/manager/managers/delete",e)},t.deleteRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/manager/roles/delete",e)},t.logManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/common/manager/logs",e)},t.login=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/common/manager/login",e)};var i,r=a(168),l=a(169),s=(i=l)&&i.__esModule?i:{default:i};function o(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}var u=s.default.compile("/common/manager/managers/:id"),c=s.default.compile("/common/manager/roles/:id");function d(){return(0,r.request_get)("/common/manager/accesses")}function p(){return(0,r.request_get)("/common/manager/accesses").then(function(e){return e.data.publish=e.data.publish.map(function(e){return n({},e,{allow_create:0,allow_delete_all:0,allow_edit_all:0,allow_view_all:0})}),e.data.read=e.data.read.map(function(e){return n({},e,{allow_create:0,allow_delete_all:0,allow_edit_all:0,allow_view_all:0})}),e})}},593:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publicMixin=void 0;var n=l(a(108)),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=l(a(589));function l(e){return e&&e.__esModule?e:{default:e}}var s={mounted:function(){var e,t=(e=n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(log("typeof this.getList: "+i(this.getList)),"undefined"===this.getList){e.next=4;break}return e.next=4,this.getList();case 4:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function n(i,r){try{var l=t[i](r),s=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})});return function(){return t.apply(this,arguments)}}(),methods:{handleNavClick:function(e){this.$router.push({path:this.path+"/"+e.name})},seareHandeler:function(){this.query=(0,r.default)(document.querySelector("#mainForm"),{hash:!0}),this.getList(1,10,this.query)},handleSizeChange:function(e){this.getList(1,e,this.query)},handleCurrentChange:function(e){this.getList(e,this.page.offset,this.query)},selcetAll:function(e){Array.from(document.querySelectorAll("[name='checkbox']")).forEach(function(t){t.checked=e.target.checked})},handleClose:function(){this.$refs.detailDialog.resetFields(),this.detailVisible=!1}}};t.publicMixin=s},617:function(e,t,a){"use strict";a.r(t);var n=a(618),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);t.default=i.a},618:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(108)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=(o(a(589)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(592))),l=a(593),s=o(a(235));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function n(i,r){try{var l=t[i](r),s=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}t.default={mixins:[l.publicMixin],data:function(){return{pageList:[],page:null,query:null,path:(0,s.default)("/","/app/systemManage"),activeName:"manager",timeValue:null,choose:[],detailVisible:!1,roleInfo:{roleValue:"",roleList:[]},detailDate:{id:"",name:"",nick_name:"",phone:"",email:"",role:"",reset:""},detailRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],nick_name:[{required:!0,message:"请输入名称",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],email:[{required:!0,message:"请输入联系邮箱",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]}}},mounted:function(){this.init()},methods:{init:function(){var e=u(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getRoleInfo();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getRoleInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;r.listRole({pageNum:t,pageOffset:a,app_type_all:1}).then(function(t){log(t.data),log(t.data[1].app_type),e.roleInfo.roleList=t.data,e.choose=e.detailDate.role})},getList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.page&&this.page.num||1,t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.page&&this.page.offset||10,n=arguments[2],l=i({pageNum:e,pageOffset:a},n,{role:this.roleInfo.roleValue});r.listManager(l).then(function(e){t.page=e.page,t.pageList=e.data})},showDetaile:function(e){if(this.detailDate.id="",this.detailDate.name="",this.detailDate.nick_name="",this.detailDate.phone="",this.detailDate.email="",this.detailDate.reset="",this.detailDate.role="",e){var t=this.pageList.find(function(t){return t.id===e});this.detailDate.id=e,this.detailDate.name=t.name,this.detailDate.nick_name=t.nick_name,this.detailDate.phone=t.phone,this.detailDate.email=t.email,this.detailDate.role=t.roles[0].name,this.detailVisible=!0}else this.detailVisible=!0},deleteHandeler:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length||Array.from(document.querySelectorAll("[name='checkbox']:checked")).forEach(function(e){t.push(e.value)}),!t.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("确认删除？").then(function(a){r.deleteManager({id:t}).then(function(t){e.getList(),e.$message({message:"删除成功",type:"success"})})}).catch(function(e){})},save:function(){var e=u(n.default.mark(function e(){var t,a=this;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.roleInfo.roleList.find(function(e){return e.name==a.detailDate.role}),this.$refs.detailDialog.validate(function(){var e=u(n.default.mark(function e(l){var s,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=22;break}if(e.prev=1,a.detailDate.id){e.next=6;break}return e.next=5,r.addManager(i({},a.detailDate,{roles:[t.id]})).then(function(e){a.getList(),a.$message({message:"添加成功",type:"success"}),a.detailVisible=!1});case 5:return e.abrupt("return");case 6:return e.next=8,r.modifyManager(i({},a.detailDate,{roles:[t.id]})).then(function(e){a.getList(),a.$message({message:"修改成功",type:"success"}),a.detailVisible=!1});case 8:e.next=20;break;case 10:e.prev=10,e.t0=e.catch(1),s=e.t0.payload,e.t1=n.default.keys(s.messages);case 14:if((e.t2=e.t1()).done){e.next=20;break}return o=e.t2.value,a.$message.error(s.messages[o]),e.abrupt("break",20);case 20:e.next=24;break;case 22:return e.abrupt("return",!1);case 24:case"end":return e.stop()}},e,a,[[1,10]])}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),resetPassword:function(){var e=this;this.$confirm("是否确认重置密码?").then(function(t){e.detailDate.reset_pass="1"}).catch(function(e){})},viewLog:function(e){var t=this.$route.path.split("/");t[t.length-1]="journal",this.$router.push({path:t.join("/"),query:{id:e}})}}}},619:function(e,t,a){},657:function(e,t,a){"use strict";var n=a(619);a.n(n).a},670:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("div",{staticClass:"searchWrap"},[a("div",{staticClass:"NavList"},[a("el-tabs",{on:{"tab-click":e.handleNavClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"管理员列表",name:"manager"}}),a("el-tab-pane",{attrs:{label:"管理员日志",name:"journal"}}),a("el-tab-pane",{attrs:{label:"角色管理",name:"role"}})],1)],1),a("form",{attrs:{id:"mainForm"}},[e._m(0),e._m(1),e._m(2),e._m(3),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),a("span",{staticClass:"group-inline"},[e.roleInfo.roleList?a("el-select",{attrs:{name:"role",placeholder:"选择角色搜索",clearable:""},model:{value:e.roleInfo.roleValue,callback:function(t){e.$set(e.roleInfo,"roleValue",t)},expression:"roleInfo.roleValue"}},e._l(e.roleInfo.roleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e()],1),a("span",{staticClass:"group-inline"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:e.seareHandeler}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",plain:""},on:{click:function(t){return e.showDetaile()}}},[e._v("新增")])],1)])]),a("div",{staticClass:"tableWrap"},[a("table",{staticClass:"table"},[e._m(4),e.pageList.length?a("tbody",e._l(e.pageList,function(t){return a("tr",[a("td",{domProps:{textContent:e._s(t.name)}}),a("td",{domProps:{textContent:e._s(t.nick_name)}}),a("td",{domProps:{textContent:e._s(t.phone)}}),a("td",{domProps:{textContent:e._s(t.email)}}),a("td",{domProps:{textContent:e._s(t.create_time)}}),a("td",e._l(t.roles,function(t,n){return a("span",[e._v(e._s(t.name))])}),0),a("td",{attrs:{id:"icon"}},[a("span",{staticClass:"icon icon-detail",attrs:{type:"primary",title:"详情",plain:"",size:"mini"},on:{click:function(a){return e.showDetaile(t.id)}}}),a("span",{staticClass:"icon icon-preview",attrs:{type:"primary",title:"查看日志",plain:"",size:"mini"},on:{click:function(a){return e.viewLog(t.id)}}}),a("span",{staticClass:"icon icon-delete",attrs:{type:"primary",title:"删除",plain:"",size:"mini"},on:{click:function(a){return e.deleteHandeler([t.id])}}})])])}),0):e._e()])]),e.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":e.page.num,"page-sizes":[10,50,100],"page-size":e.page.offset,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e(),a("el-dialog",{attrs:{visible:e.detailVisible,"before-close":e.handleClose,"lock-scroll":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.detailVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"详情",name:"detail"}})],1)],1),a("el-form",{ref:"detailDialog",attrs:{model:e.detailDate,rules:e.detailRules}},[a("el-form-item",{attrs:{label:"用户名:","label-width":"120px",prop:"name"}},[a("el-input",{model:{value:e.detailDate.name,callback:function(t){e.$set(e.detailDate,"name",t)},expression:"detailDate.name"}})],1),a("el-form-item",{attrs:{label:"名称:","label-width":"120px",prop:"nick_name"}},[a("el-input",{model:{value:e.detailDate.nick_name,callback:function(t){e.$set(e.detailDate,"nick_name",t)},expression:"detailDate.nick_name"}})],1),a("el-form-item",{attrs:{label:"联系电话:","label-width":"120px",prop:"phone"}},[a("el-input",{model:{value:e.detailDate.phone,callback:function(t){e.$set(e.detailDate,"phone",t)},expression:"detailDate.phone"}})],1),a("el-form-item",{attrs:{label:"联系邮箱:","label-width":"120px",prop:"email"}},[a("el-input",{model:{value:e.detailDate.email,callback:function(t){e.$set(e.detailDate,"email",t)},expression:"detailDate.email"}})],1),a("el-form-item",{attrs:{label:"角色:","label-width":"120px",prop:"role"}},[a("el-radio-group",{attrs:{min:1,max:100},model:{value:e.detailDate.role,callback:function(t){e.$set(e.detailDate,"role",t)},expression:"detailDate.role"}},e._l(e.roleInfo.roleList,function(t){return a("el-radio",{key:t.id,attrs:{label:t.name,name:"role"}},[e._v(e._s(t.name))])}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.detailDate.id,expression:"detailDate.id"}],attrs:{label:"登录密码:","label-width":"120px"}},[a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:e.resetPassword}},[e._v("重置")]),a("span",{staticClass:"pass-tip"},[e._v("将重置为初始密码：123456")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"}),a("el-button",{attrs:{type:"info"},on:{click:e.handleClose}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)],1)},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"name",placeholder:"输入用户名搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"nick_name",placeholder:"输入名称搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"phone",placeholder:"输入电话搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"email",placeholder:"输入邮箱搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("用户名")]),t("th",[this._v("名称")]),t("th",[this._v("联系电话")]),t("th",[this._v("联系邮箱")]),t("th",[this._v("创建时间")]),t("th",[this._v("角色")]),t("th",[this._v("操作")])])])}];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})}}]);