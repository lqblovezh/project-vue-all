(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{579:function(t,e,n){"use strict";n.r(e);var r=n(672),a=n(611);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n(655);var o=n(25),u=Object(o.a)(a.default,r.a,r.b,!1,null,"5ca04553",null);e.default=u.exports},611:function(t,e,n){"use strict";n.r(e);var r=n(612),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);e.default=a.a},612:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(108)),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=(c(n(589)),s(n(234)),s(n(651))),o=(n(652),n(654)),u=n(234);function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}("next")})}}e.default={data:function(){return{info:{},previewImgUrl:null,loginInfo:{}}},created:function(){this.getInfo(),this.getloginInfo()},methods:{getInfo:function(){var t=this;i.getInfo().then(function(e){var n=e.data,r=n.type,i=n.extend_info;t.info=r.map(function(t){return a({},i[t],{type:t})})})},getUrl:function(t,e,n){n[t+"_absolute"]=URL.createObjectURL(e.target.files[0])},getloginInfo:function(){var t=l(r.default.mark(function t(){var e=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.getInfo)().then(function(t){e.loginInfo=t.data,t.data});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),scan:function(t,e){this.currentId=t.id,log(t),this.$refs[e][0].click()},submit:function(){var t=l(r.default.mark(function t(e,n){var o,s,c,l=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.$refs["logo"+n][0].files[0],s=this.$refs["ico"+n][0].files[0],this.$loading({text:"正在上传",background:"rgba(0, 0, 0, 0.8)"}),t.prev=3,!o||this.currentId!=e.id){t.next=7;break}return t.next=7,(0,u.getTask)(o).then(function(t){e.logo=t.data.path});case 7:if(!s||this.currentId!=e.id){t.next=10;break}return t.next=10,(0,u.getTask)(s).then(function(t){e.icon=t.data.path});case 10:return t.next=12,i.setting({id:e.id,extend_info:(f={},d=e.type,p=a({},e,{logo:e.logo,icon:e.icon}),d in f?Object.defineProperty(f,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[d]=p,f)}).then(function(t){l.$message.success("保存成功")});case 12:t.next=25;break;case 14:if(t.prev=14,t.t0=t.catch(3),console.error(t.t0),!t.t0.payload){t.next=25;break}t.t1=r.default.keys(t.t0.payload.messages);case 19:if((t.t2=t.t1()).done){t.next=25;break}return c=t.t2.value,this.$message.error(t.t0.payload.messages[c]),t.abrupt("break",25);case 25:this.$loadingClose();case 26:case"end":return t.stop()}var f,d,p},t,this,[[3,14]])}));return function(e,n){return t.apply(this,arguments)}}(),uploadImg:function(){var t=l(r.default.mark(function t(e){var n,a,i=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.target,a=n.files[0],this.imgFile=a,this.$loading(),t.next=6,(0,u.getTask)(a).then(function(t){i.previewImgUrl=t.data.url,i.$loadingClose()}).catch(function(t){i.$loadingClose()});case 6:return t.next=8,(0,o.save)({data:{banner:{value:value},title:{value:value},logo:{value:value}}}).then(function(t){i.$message.success("保存成功"),i.$emit("saveok",t.data)});case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}},613:function(t,e,n){},651:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setting=void 0;var r,a,i=c(n(108));e.setting=(r=i.default.mark(function t(e){var n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,t.next=3,(0,s.platInfo)({id:"current"}).then(function(t){n=t.data.id});case 3:return t.abrupt("return",(0,o.request_post)(l({id:n}),e));case 4:case"end":return t.stop()}},t,this)}),a=function(){var t=r.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});e(u)}("next")})},function(t){return a.apply(this,arguments)});e.getInfo=function(){return(0,s.platInfo)({id:"current"})};var o=n(168),u=c(n(169)),s=n(234);function c(t){return t&&t.__esModule?t:{default:t}}var l=u.default.compile("/common/app/apps/:id/extend_info")},654:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.save=void 0;var r,a,i=u(n(108));e.save=(r=i.default.mark(function t(e){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=4;break}return t.abrupt("return",(0,o.request_put)(s({id:e.id}),e));case 4:if(!e.key){t.next=8;break}return t.next=7,(0,o.request_post)("/system/setting/add",e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t,this)}),a=function(){var t=r.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});e(u)}("next")})},function(t){return a.apply(this,arguments)});e.getInfo=function(){return(0,o.request_get)("/system/setting/get_set_list",{pageStart:0,pageOffset:100}).then(function(t){var e={loginInfo:{},contact:{},outlink:[],ewm:[]};return t.data.forEach(function(t){"info"==t.name?e.loginInfo[t.key]=t:"contact"==t.name?e.contact[t.key]=t:"outlink"==t.name?e.outlink.push(t):"ewm"==t.name&&e.ewm.push(t)}),!Object.values(e.loginInfo).length<3&&(e.loginInfo.title=e.loginInfo.title||{name:"info",key:"title",value:"",type:1},e.loginInfo.ico=e.loginInfo.ico||{name:"info",key:"ico",value:"",type:2},e.loginInfo.logo=e.loginInfo.logo||{name:"info",key:"logo",value:"",type:2},e.loginInfo.banner=e.loginInfo.banner||{name:"info",key:"banner",value:"",type:2}),!Object.values(e.contact).length<3&&(e.contact.phone=e.contact.phone||{name:"contact",key:"phone",value:"",type:1},e.contact.qq=e.contact.qq||{name:"contact",key:"qq",value:"",type:1},e.contact.email=e.contact.email||{name:"contact",key:"email",value:"",type:1}),e})},e.del=function(t){return(0,o.request_delete)(s(t),t)};var o=n(168);function u(t){return t&&t.__esModule?t:{default:t}}var s=u(n(169)).default.compile("/system/setting/:id")},655:function(t,e,n){"use strict";var r=n(613);n.n(r).a},672:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-wrap"},[n("div",{staticClass:"content"},[n("div",{staticClass:"titleWrap"},[n("div",{staticClass:"tableTop"},[n("div",{staticClass:"title vel-line"},[n("span",{staticClass:"titleText"},[t._v("首页配置")]),n("div",{staticClass:"tableWrap"},[n("table",{staticClass:"table"},[t._m(0),n("tbody",t._l(t.info,function(e,r){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.type))]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"item.title"}],attrs:{type:"text"},domProps:{value:e.title},on:{input:function(n){n.target.composing||t.$set(e,"title",n.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.introduction,expression:"item.introduction"}],attrs:{type:"text"},domProps:{value:e.introduction},on:{input:function(n){n.target.composing||t.$set(e,"introduction",n.target.value)}}})]),n("td",[n("img",{staticClass:"scanImg",attrs:{src:e.logo_absolute}}),n("input",{ref:"logo"+r,refInFor:!0,staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(n){return t.getUrl("logo",n,e)}}}),n("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(n){return t.scan(e,"logo"+r)}}},[t._v("浏览")])],1),n("td",[n("img",{staticClass:"scanImg",attrs:{src:e.icon_absolute}}),n("input",{ref:"ico"+r,refInFor:!0,staticClass:"hide",attrs:{type:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(n){return t.getUrl("icon",n,e)}}}),n("el-button",{attrs:{plain:"",type:"primary",size:"mini"},on:{click:function(n){return t.scan(e,"ico"+r,e)}}},[t._v("浏览")])],1),n("td",[n("el-button",{attrs:{plain:"",type:"primary",size:"small"},on:{click:function(n){return t.submit(e,r)}}},[t._v("确认\t\t\t\t\t\t")])],1)])}),0)])])])])])])])},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{width:""}},[this._v("应用类型")]),e("th",[this._v("系统名称")]),e("th",[this._v("欢迎词")]),e("th",[this._v("LOGO")]),e("th",[this._v("网站 ico")]),e("th",[this._v("操作")])])])}];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a})}}]);