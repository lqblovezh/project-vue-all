(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{583:function(e,t,a){"use strict";a.r(t);var i=a(669),l=a(623);for(var n in l)"default"!==n&&function(e){a.d(t,e,function(){return l[e]})}(n);a(659);var r=a(25),o=Object(r.a)(l.default,i.a,i.b,!1,null,"dad5f62c",null);t.default=o.exports},589:function(e,t){var a=/^(?:submit|button|image|reset|file)$/i,i=/^(?:input|select|textarea|keygen)/i,l=/(\[[^\[\]]*\])/g;function n(e,t,a){if(t.match(l)){!function e(t,a,i){if(0===a.length)return t=i;var l=a.shift(),n=l.match(/^\[(.+?)\]$/);if("[]"===l)return t=t||[],Array.isArray(t)?t.push(e(null,a,i)):(t._values=t._values||[],t._values.push(e(null,a,i))),t;if(n){var r=n[1],o=+r;isNaN(o)?(t=t||{})[r]=e(t[r],a,i):(t=t||[])[o]=e(t[o],a,i)}else t[l]=e(t[l],a,i);return t}(e,function(e){var t=[],a=new RegExp(l),i=/^([^\[\]]*)/.exec(e);for(i[1]&&t.push(i[1]);null!==(i=a.exec(e));)t.push(i[1]);return t}(t),a)}else{var i=e[t];i?(Array.isArray(i)||(e[t]=[i]),e[t].push(a)):e[t]=a}return e}function r(e,t,a){return a=a.replace(/(\r)?\n/g,"\r\n"),a=(a=encodeURIComponent(a)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+a}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var l=t.hash?{}:"",o=t.serializer||(t.hash?n:r),s=e&&e.elements?e.elements:[],c=Object.create(null),d=0;d<s.length;++d){var u=s[d];if((t.disabled||!u.disabled)&&u.name&&i.test(u.nodeName)&&!a.test(u.type)){var p=u.name,f=u.value;if("checkbox"!==u.type&&"radio"!==u.type||u.checked||(f=void 0),t.empty){if("checkbox"!==u.type||u.checked||(f=""),"radio"===u.type&&(c[u.name]||u.checked?u.checked&&(c[u.name]=!0):c[u.name]=!1),void 0==f&&"radio"==u.type)continue}else if(!f)continue;if("select-multiple"!==u.type)l=o(l,p,f);else{f=[];for(var h=u.options,m=!1,v=0;v<h.length;++v){var _=h[v],b=t.empty&&!_.value,g=_.value||b;_.selected&&g&&(m=!0,l=t.hash&&"[]"!==p.slice(p.length-2)?o(l,p+"[]",_.value):o(l,p,_.value))}!m&&t.empty&&(l=o(l,p,""))}}}if(t.empty)for(var p in c)c[p]||(l=o(l,p,""));return l}},592:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e};t.listRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/common/manager/roles",e)},t.listManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/common/manager/managers",e)},t.addManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/manager/managers",e)},t.modifyManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=s(e,["id"]);return(0,n.request_put)(c({id:t}),a)},t.detailManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=s(e,["id"]);return(0,n.request_get)(c({id:t}),a)},t.detailRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=s(e,["id"]);return t?(0,n.request_get)(d({id:t}),a).then(function(e){if(e.status)return u().then(function(t){return t.data.publish=t.data.publish.map(function(t){return Object.keys(e.data.accesses).includes(t.id)?i({},t,e.data.accesses[t.id]):t}),t.data.read=t.data.read.map(function(t){return Object.keys(e.data.accesses).includes(t.id)?i({},t,e.data.accesses[t.id]):t}),t})}):p()},t.allJurisdiction=u,t._allJurisdiction=p,t.role=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,a=s(e,["id"]);if(t)return(0,n.request_put)(d({id:t}),a);return(0,n.request_post)("/common/manager/roles",a)},t.addRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/manager/roles",e)},t.deleteManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/manager/managers/delete",e)},t.deleteRole=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/manager/roles/delete",e)},t.logManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_get)("/common/manager/logs",e)},t.login=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.request_post)("/common/manager/login",e)};var l,n=a(168),r=a(169),o=(l=r)&&l.__esModule?l:{default:l};function s(e,t){var a={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(a[i]=e[i]);return a}var c=o.default.compile("/common/manager/managers/:id"),d=o.default.compile("/common/manager/roles/:id");function u(){return(0,n.request_get)("/common/manager/accesses")}function p(){return(0,n.request_get)("/common/manager/accesses").then(function(e){return e.data.publish=e.data.publish.map(function(e){return i({},e,{allow_create:0,allow_delete_all:0,allow_edit_all:0,allow_view_all:0})}),e.data.read=e.data.read.map(function(e){return i({},e,{allow_create:0,allow_delete_all:0,allow_edit_all:0,allow_view_all:0})}),e})}},593:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publicMixin=void 0;var i=r(a(108)),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=r(a(589));function r(e){return e&&e.__esModule?e:{default:e}}var o={mounted:function(){var e,t=(e=i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(log("typeof this.getList: "+l(this.getList)),"undefined"===this.getList){e.next=4;break}return e.next=4,this.getList();case 4:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function i(l,n){try{var r=t[l](n),o=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})});return function(){return t.apply(this,arguments)}}(),methods:{handleNavClick:function(e){this.$router.push({path:this.path+"/"+e.name})},seareHandeler:function(){this.query=(0,n.default)(document.querySelector("#mainForm"),{hash:!0}),this.getList(1,10,this.query)},handleSizeChange:function(e){this.getList(1,e,this.query)},handleCurrentChange:function(e){this.getList(e,this.page.offset,this.query)},selcetAll:function(e){Array.from(document.querySelectorAll("[name='checkbox']")).forEach(function(t){t.checked=e.target.checked})},handleClose:function(){this.$refs.detailDialog.resetFields(),this.detailVisible=!1}}};t.publicMixin=o},623:function(e,t,a){"use strict";a.r(t);var i=a(624),l=a.n(i);for(var n in i)"default"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);t.default=l.a},624:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},l=(o(a(589)),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(592))),n=a(593),r=o(a(235));function o(e){return e&&e.__esModule?e:{default:e}}t.default={mixins:[n.publicMixin],data:function(){return{pageList:[],query:null,path:(0,r.default)("/","/app/systemManage"),activeName:"role",publish:null,read:null,detailVisible:!1,detailDate:{id:"",name:"",exp:"",accesses:{}},detailRules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"}],exp:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}}},methods:{getList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments[2],r=i({pageNum:e,pageOffset:a},n);l.listRole(r).then(function(e){t.page=e.page,t.pageList=e.data})},showDetaile:function(e){var t=this;this.detailDate.id=this.detailDate.name=this.detailDate.exp="",l.detailRole({id:e}).then(function(a){if(e){var i=t.pageList.find(function(t){return t.id===e});t.detailDate.id=e,t.detailDate.name=i.name,t.detailDate.exp=i.exp}log(a,789),t.publish=a.data.publish,t.read=a.data.read,t.detailVisible=!0})},deleteHandeler:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length||Array.from(document.querySelectorAll("[name='checkbox']:checked")).forEach(function(e){t.push(e.value)}),!t.length)return this.$message.error("请确认你要删除的内容！");this.$confirm("确认删除？").then(function(a){l.deleteRole({id:t}).then(function(t){e.getList()},function(t){e.$message.error(t.message)})}).catch(function(e){})},save:function(){var e=this;this.$refs.detailDialog.validate(function(t){if(!t)return!1;i({},e.publish,e.read);for(var a in e.publish)e.detailDate.accesses[e.publish[a].id]=e.publish[a];for(var n in e.read)e.detailDate.accesses[e.read[n].id]=e.read[n];l.role(e.detailDate).then(function(t){e.$message.success("保存成功"),e.getList(),e.detailVisible=!1}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}})})},handlePageClick:function(e,t,a){var i=this[a][e],l=void 0;t.target.checked?l=1:(l=0,this.$refs[a].checked=!1),i.allow_create=l,i.allow_delete_all=l,i.allow_edit_all=l,i.allow_view_all=l},handleOptionsClick:function(e,t,a){t.target.checked||(this.$refs[a].checked=!1,document.querySelector("#item_"+e).checked=!1),this[a][e][t.target.getAttribute("data-type")]=Number(t.target.checked)},isChecked:function(e){return e.allow_create&&e.allow_delete_all&&e.allow_edit_all&&e.allow_view_all},selectAll:function(e,t){var a=t.target.checked?1:0,i=this[e];for(var l in i)i[l].allow_create=a,i[l].allow_delete_all=a,i[l].allow_edit_all=a,i[l].allow_view_all=a}},computed:{isAllChecked:function(e){var t=this.detailDate.accesses,a=!0,i=!1,l=void 0;try{for(var n,r=Object.keys(t)[Symbol.iterator]();!(a=(n=r.next()).done);a=!0){var o=t[n.value];if(!(o.allow_create&&o.allow_delete_all&&o.allow_edit_all&&o.allow_view_all))return!1}}catch(e){i=!0,l=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw l}}}}}},625:function(e,t,a){},659:function(e,t,a){"use strict";var i=a(625);a.n(i).a},669:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role innerBox"},[a("div",{staticClass:"searchWrap searchBar"},[a("div",{staticClass:"NavList"},[a("el-tabs",{on:{"tab-click":e.handleNavClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"管理员列表",name:"manager"}}),a("el-tab-pane",{attrs:{label:"管理员日志",name:"journal"}}),a("el-tab-pane",{attrs:{label:"角色管理",name:"role"}})],1)],1),a("form",{attrs:{id:"mainForm"}},[e._m(0),a("span",{staticClass:"group-inline"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",plain:""},on:{click:e.seareHandeler}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",plain:""},on:{click:function(t){return e.showDetaile()}}},[e._v("新增")])],1)])]),a("div",{staticClass:"tableWrap"},[a("table",{staticClass:"table"},[e._m(1),e.pageList.length?a("tbody",e._l(e.pageList,function(t){return a("tr",[a("td",{domProps:{textContent:e._s(t.name)}}),a("td",{domProps:{textContent:e._s(t.exp)}}),a("td",[a("span",{staticClass:"icon icon-detail",attrs:{type:"primary",title:"详情",plain:"",size:"mini"},on:{click:function(a){return e.showDetaile(t.id)}}}),a("span",{staticClass:"icon icon-delete",attrs:{type:"primary",title:"删除",plain:"",size:"mini"},on:{click:function(a){return e.deleteHandeler([t.id])}}})])])}),0):e._e()])]),a("el-dialog",{attrs:{visible:e.detailVisible,"before-close":e.handleClose,"lock-scroll":!1,width:"70%"},on:{"update:visible":function(t){e.detailVisible=t}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"详情",name:"detail"}})],1)],1),a("el-form",{ref:"detailDialog",attrs:{model:e.detailDate,rules:e.detailRules}},[a("el-form-item",{attrs:{label:"角色名:","label-width":"120px",prop:"name"}},[a("el-input",{model:{value:e.detailDate.name,callback:function(t){e.$set(e.detailDate,"name",t)},expression:"detailDate.name"}})],1),a("el-form-item",{attrs:{label:"角色描述:","label-width":"120px",prop:"exp"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.detailDate.exp,callback:function(t){e.$set(e.detailDate,"exp",t)},expression:"detailDate.exp"}})],1)],1),a("el-tabs",{attrs:{value:"x-publish",type:"border-card"}},[a("el-tab-pane",{attrs:{label:"x-publush权限",name:"x-publish"}},[a("table",{staticClass:"table border",attrs:{width:"100%",id:"detailTable1"}},[a("thead",[a("tr",[a("th",[a("span",[e._v("页面显示")]),e.publish?a("input",{ref:"publish",attrs:{type:"checkbox"},on:{click:function(t){return e.selectAll("publish",t)}}}):e._e(),a("span",[e._v("全选")])]),a("th",[e._v("权限功能")])])]),a("tbody",e._l(e.publish,function(t,i){return a("tr",[a("td",{attrs:{align:"center"}},[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"pages",id:"item_"+i},domProps:{checked:e.isChecked(t)},on:{click:function(t){return e.handlePageClick(i,t,"publish")}}}),a("label",{attrs:{for:"item_"+t.id},domProps:{textContent:e._s(t.name)}})]),a("td",{attrs:{align:"left"}},[a("ul",{staticClass:"options"},[a("li",[a("input",{attrs:{type:"checkbox",id:"items_"+t.id+"add","data-type":"allow_create"},domProps:{checked:t.allow_create},on:{click:function(t){return e.handleOptionsClick(i,t,"publish")}}}),a("label",{attrs:{for:"items_"+t.id+"add"}},[e._v("新增 ")])]),a("li",[a("input",{attrs:{type:"checkbox",id:"items_"+t.id+"del","data-type":"allow_delete_all"},domProps:{checked:t.allow_delete_all},on:{click:function(t){return e.handleOptionsClick(i,t,"publish")}}}),a("label",{attrs:{for:"items_"+t.id+"del"}},[e._v("删除")])]),a("li",[a("input",{attrs:{type:"checkbox",id:"items_"+t.id+"mod","data-type":"allow_edit_all"},domProps:{checked:t.allow_edit_all},on:{click:function(t){return e.handleOptionsClick(i,t,"publish")}}}),a("label",{attrs:{for:"items_"+t.id+"mod"}},[e._v("修改")])]),a("li",[a("input",{attrs:{type:"checkbox",id:"items_"+t.id+"viw","data-type":"allow_view_all"},domProps:{checked:t.allow_view_all},on:{click:function(t){return e.handleOptionsClick(i,t,"publish")}}}),a("label",{attrs:{for:"items_"+t.id+"viw"}},[e._v("查询")])])])])])}),0)])]),a("el-tab-pane",{attrs:{label:"x-read权限",name:"x-read"}},[a("table",{staticClass:"table border",attrs:{width:"100%",id:"detailTable2"}},[a("thead",[a("tr",[a("th",[a("span",[e._v("页面显示")]),e.read?a("input",{ref:"read",attrs:{type:"checkbox"},on:{click:function(t){return e.selectAll("read",t)}}}):e._e(),a("span",[e._v("全选")])]),a("th",[e._v("权限功能")])])]),a("tbody",e._l(e.read,function(t,i){return a("tr",[a("td",{attrs:{align:"center"}},[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"pages",id:"item_"+i},domProps:{checked:e.isChecked(t)},on:{click:function(t){return e.handlePageClick(i,t,"read")}}}),a("label",{attrs:{for:"item_"+t.id},domProps:{textContent:e._s(t.name)}})]),a("td",{attrs:{align:"left"}},[a("ul",{staticClass:"options"},[a("li",[a("input",{attrs:{type:"checkbox",id:"items_"+t.id+"add","data-type":"allow_create"},domProps:{checked:t.allow_create},on:{click:function(t){return e.handleOptionsClick(i,t,"read")}}}),a("label",{attrs:{for:"items_"+t.id+"add"}},[e._v("新增")])]),a("li",[a("input",{attrs:{type:"checkbox",id:"items_"+t.id+"del","data-type":"allow_delete_all"},domProps:{checked:t.allow_delete_all},on:{click:function(t){return e.handleOptionsClick(i,t,"read")}}}),a("label",{attrs:{for:"items_"+t.id+"del"}},[e._v("删除")])]),a("li",[a("input",{attrs:{type:"checkbox",id:"items_"+t.id+"mod","data-type":"allow_edit_all"},domProps:{checked:t.allow_edit_all},on:{click:function(t){return e.handleOptionsClick(i,t,"read")}}}),a("label",{attrs:{for:"items_"+t.id+"mod"}},[e._v("修改")])]),a("li",[a("input",{attrs:{type:"checkbox",id:"items_"+t.id+"viw","data-type":"allow_view_all"},domProps:{checked:t.allow_view_all},on:{click:function(t){return e.handleOptionsClick(i,t,"read")}}}),a("label",{attrs:{for:"items_"+t.id+"viw"}},[e._v("查询")])])])])])}),0)])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:e.handleClose}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)],1)],1)},l=[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"group-inline"},[t("input",{staticClass:"form-control",attrs:{name:"name",placeholder:"输入角色名搜索"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("角色名")]),t("th",{attrs:{width:"400"}},[this._v("角色描述")]),t("th",[this._v("操作")])])])}];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return l})}}]);