(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1064:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_get)("/read/recommends",t)},e.save=function(t){var e=t.id,a=o(t,["id"]);if(e)return(0,r.request_put)(u({id:e}),a);return(0,r.request_post)("/read/recommends",a)},e.detail=function(t){var e=t.id;o(t,["id"]);return(0,r.request_get)(u({id:e}))},e.del=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/read/recommends/delete",t)},e.sort=function(t){var e=t.id,a=o(t,["id"]);return(0,r.request_put)(c({id:e}),a)},e.put=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)("/read/recommends/recommend",t)},e.pull=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)("/read/recommends/withdraw",t)},e.groupList=function(){return(0,r.request_get)("/read/recommends/groups")},e.group=function(t){var e=t.id,a=o(t,["id"]);if(e)return(0,r.request_put)(l({id:e}),a);return(0,r.request_post)("/read/recommends/groups",a)},e.groupDel=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_post)("/read/recommends/groups/delete",t)},e.groupMove=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.request_put)("/read/recommends/groups",t)};var i,r=a(76),n=a(106),s=(i=n)&&i.__esModule?i:{default:i};function o(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}var u=s.default.compile("/read/recommends/:id"),l=s.default.compile("/read/recommends/groups/:id"),c=s.default.compile("/read/recommends/sort/:id")},1065:function(t,e,a){"use strict";var i=a(563);a.n(i).a},1100:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index clearfix"},[a("div",{staticClass:"dialogs"},[t.moveToOtherDiaolog?a("MoveGroup",{attrs:{currGroup:t.currGroup,groupList:t.groupList},on:{back:function(e){t.moveToOtherDiaolog=!1},submit:t.moveToSubmit}}):t._e(),a("el-dialog",{attrs:{visible:t.detailDialog},on:{"update:visible":function(e){t.detailDialog=e}}},[a("div",{staticClass:"header",attrs:{slot:"title"},slot:"title"},[a("el-tabs",{attrs:{value:"detail"}},[a("el-tab-pane",{attrs:{label:"详情",name:"detail"}})],1)],1),a("VaForm",{ref:"detailForm"},[a("form",{staticClass:"detailForm"},[a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("推荐语：")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.detailDate.name,expression:"detailDate.name"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.detailDate.name},on:{input:function(e){e.target.composing||t.$set(t.detailDate,"name",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("推荐人：")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.detailDate.referee,expression:"detailDate.referee"}],staticClass:"form-control",attrs:{name:"referee"},domProps:{value:t.detailDate.referee},on:{input:function(e){e.target.composing||t.$set(t.detailDate,"referee",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("标签：")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.detailDate.tag,expression:"detailDate.tag"}],staticClass:"form-control",attrs:{name:"tag"},domProps:{value:t.detailDate.tag},on:{input:function(e){e.target.composing||t.$set(t.detailDate,"tag",e.target.value)}}})]),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("关联地址：")]),a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"},{name:"model",rawName:"v-model",value:t.detailDate.ted_address,expression:"detailDate.ted_address"}],staticClass:"form-control",attrs:{name:"ted_address"},domProps:{value:t.detailDate.ted_address},on:{input:function(e){e.target.composing||t.$set(t.detailDate,"ted_address",e.target.value)}}})])])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.detailDialog=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)],1)],1),a("div",{staticClass:"mainRight"},[a("div",{staticClass:"contentWrap"},[a("div",{staticClass:"contentLeft"},[a("div",{staticClass:"maindata"},[a("div",{staticClass:"serachWrap"},[a("div",{staticClass:"title"}),a("form",{staticClass:"clearfix",attrs:{id:"mainForm"}},[a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"输入推荐语搜索",name:"name",clearable:""}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"输入标签搜索",name:"tag",clearable:""}})],1),a("span",{staticClass:"group-inline"},[a("el-input",{attrs:{placeholder:"输入推荐人搜索",name:"referee",clearable:""}})],1),a("span",{staticClass:"group-inline"},[a("TimePick",{attrs:{inputsName:["start_time","end_time"]}})],1),t._m(0),a("span",{staticClass:"group-inline float-right"},[a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-search",plain:""},on:{click:t.query}},[t._v("搜索")]),a("el-button",{attrs:{size:"mediu",type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(e){return t.opneDetailDialog()}}},[t._v("新建")])],1)])]),a("div",{staticClass:"tableWrap"},[a("div",{staticClass:"tableTop"},[a("div",{staticClass:"title vel-line"},[a("span",[t._v("全部 "),t.page?a("span",{staticClass:"totalNum"},[t._v("("+t._s(t.page.total)+")")]):t._e()]),a("div",{staticClass:"btns"},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:t.moveToOther}},[t._v("移动分组")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.upShelf()}}},[t._v("推荐")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.downShelf()}}},[t._v("撤下")]),a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.delChoosen()}}},[t._v("删除")])],1)])]),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{staticClass:"table-check"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.$checkAll(e)}}})]),a("th",[t._v("推荐语")]),a("th",[t._v("推荐人")]),a("th",[t._v("标签")]),a("th",[t._v("创建时间")]),a("th",[t._v("关联地址")]),a("th",[t._v("状态")]),a("th",[t._v("排序")]),a("th",{attrs:{width:"100"}},[t._v("操作")])])]),t.list?a("tbody",t._l(t.list,function(e,i){return a("tr",[a("td",[a("input",{ref:"ids",refInFor:!0,attrs:{type:"checkbox",name:"ids"},domProps:{value:e.id}})]),a("td",[a("div",{staticClass:"th-name",attrs:{title:e.name}},[t._v(t._s(e.name))])]),a("td",[a("div",{staticClass:"th-name",attrs:{title:e.referee}},[t._v(t._s(e.referee))])]),a("td",[a("div",{staticClass:"th-name",attrs:{title:e.tag}},[t._v(t._s(e.tag))])]),a("td",[t._v(t._s(e.create_time))]),a("td",[a("div",{staticClass:"th-name",attrs:{title:e.ted_address}},[t._v(t._s(e.ted_address))])]),a("td",[a("div",{staticClass:"th-name"},[t._v(t._s(e.status))])]),a("td",[a("el-button",{attrs:{type:"text",disabled:0==i},on:{click:function(a){return t.srot(e.id,"up")}}},[a("i",{staticClass:"icon el-icon-sort-up"})]),a("el-button",{attrs:{type:"text",disabled:i==t.list.length-1},on:{click:function(a){return t.srot(e.id,"down")}}},[a("i",{staticClass:"icon el-icon-sort-down"})])],1),a("td",[a("div",{staticClass:"btns"},[a("Icon",{attrs:{type:"icon-detail",title:"详情"},on:{click:function(a){return t.opneDetailDialog(e)}}}),"本周"!=e.status?a("Icon",{attrs:{type:"icon-upload",title:"推荐"},on:{click:function(a){return t.upShelf(e.id)}}}):t._e(),"本周"==e.status?a("Icon",{attrs:{type:"icon-reject",title:"撤下"},on:{click:function(a){return t.downShelf(e.id)}}}):t._e(),a("Icon",{attrs:{type:"icon-preview",title:"查看关联"},on:{click:function(a){return t.about(e.ted_address)}}}),a("Icon",{attrs:{type:"icon-delete",title:"删除"},on:{click:function(a){return t.delChoosen(e.id)}}})],1)])])}),0):t._e()]),t.page?a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{small:!1,background:"","current-page":t.page.num,"page-sizes":[10,50,100],"page-size":t.page.offset,layout:"total, sizes,prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),a("div",{staticClass:"gruopList"},[a("GroupList",{attrs:{groupList:t.groupList,currGroup:t.currGroup},on:{addGroup:t.addGroup,updateGroup:t.updateGroup,delGroup:t.delGroup,groupChange:t.groupChange}})],1)])])])])])},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"group-inline"},[e("select",{staticClass:"form-control width-small",attrs:{placeholder:"请选择",name:"status"}},[e("option",{attrs:{value:""}},[this._v("所有")]),e("option",{attrs:{value:"1"}},[this._v("未使用")]),e("option",{attrs:{value:"2"}},[this._v("本周")]),e("option",{attrs:{value:"3"}},[this._v("往期")])])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},269:function(t,e,a){"use strict";a.r(e);var i=a(1100),r=a(561);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(1065);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"686bdf7b",null);e.default=o.exports},333:function(t,e,a){"use strict";a.r(e);var i=a(605),r=a(352);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);a(472);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"01130e0a",null);e.default=o.exports},335:function(t,e,a){"use strict";a.r(e);var i=a(604),r=a(355);for(var n in r)"default"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);var s=a(0),o=Object(s.a)(r.default,i.a,i.b,!1,null,"66ea60dc",null);e.default=o.exports},352:function(t,e,a){"use strict";a.r(e);var i=a(353),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},353:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],data:function(){return{newGroupDialogOpen:!1,updateGroupDialogOpen:!1,currEditGroup:null}},created:function(){},computed:{},methods:{groupChange:function(t){this.$emit("groupChange",t)},addGroupDialog:function(){},delGroup:function(t){var e=this;this.$confirm("是否删除分组:"+t.name).then(function(a){dir(a),e.$emit("delGroup",t.id)}).catch(function(t){dir(t)})},updateGroupDialog:function(t){this.currEditGroup=t,log(t),this.updateGroupDialogOpen=!0},addGroup:function(){if(this.$refs.addGroupForm.valiAll()){var t=document.querySelector("#addGroupForm");this.$emit("addGroup",t),this.newGroupDialogOpen=!1}},updateGroup:function(){if(this.$refs.updateGroupForm.valiAll()){var t=document.querySelector("#updateGroupForm");this.$emit("updateGroup",t),this.updateGroupDialogOpen=!1}},moveToSubmit:function(){this.$emit("moveGroup")}}}},354:function(t,e,a){},355:function(t,e,a){"use strict";a.r(e);var i=a(356),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},356:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["groupList","currGroup"],created:function(){log("重庆插件")},data:function(){return{flag:!0}},methods:{submit:function(){var t=this.$refs.moveToId.value;this.$emit("submit",t)}},watch:{flag:function(){this.flag||this.$emit("back")}}}},472:function(t,e,a){"use strict";var i=a(354);a.n(i).a},561:function(t,e,a){"use strict";a.r(e);var i=a(562),r=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=r.a},562:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(a(15)),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},n=c(a(333)),s=(c(a(289)),a(290)),o=c(a(335)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(a(1064)),l=a(44);function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{GroupList:n.default,MoveGroup:o.default},mixins:[s.main],data:function(){return{services:u,detailDialog:!1,timePick:null,imgLinkDialog:!1,publishDialog:!1,moveToOtherDiaolog:!1,moveIds:null,pustSetDialog:!1,currentPut:null,toId:null,fabuIds:[],detailDate:{}}},methods:r({opneDetailDialog:function(){var t,e=(t=i.default.mark(function t(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.id){t.next=5;break}return t.next=3,u.detail({id:a.id}).then(function(t){e.detailDate=t.data});case 3:t.next=6;break;case 5:this.detailDate=a;case 6:this.detailDialog=!0;case 7:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(r,n){try{var s=e[r](n),o=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})});return function(){return e.apply(this,arguments)}}(),setList:function(t){this.setRecommendlist(t)},setGroupList:function(t){this.setRecommendGrouplist(t)},setPage:function(t){this.setRecommendlistPage(t)},srot:function(t,e){var a=this;u.sort({id:t,status:e}).then(function(t){a.getList()})},upShelf:function(t){var e=this,a=[];if(t)a.push(t);else if(!(a=this.$getChecked()))return;this.services.put({id:a}).then(function(t){e.$message.success("上架成功"),e.getList()}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}})},downShelf:function(t){var e=this,a=[];if(t)a.push(t);else if(!(a=this.$getChecked()))return;this.services.pull({id:a}).then(function(t){e.$message.success("下架成功"),e.getList()}).catch(function(t){var a=t.payload;for(var i in a.messages){e.$message.error(a.messages[i]);break}})},save:function(){var t=this;this.services.save(this.detailDate).then(function(e){t.detailDialog=!1,t.getList()}).catch(function(e){var a=e.payload;for(var i in a.messages){t.$message.error(a.messages[i]);break}})},about:function(t){t&&window.open(t,"_blank")}},(0,l.mapMutations)(["setRecommendlist","setRecommendGrouplist","setRecommendlistPage"])),computed:r({},(0,l.mapState)({list:function(t){return t.recommend.list},groupList:function(t){return t.recommend.groupList},page:function(t){return t.recommend.page}}))}},563:function(t,e,a){},604:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[t.flag?a("el-dialog",{attrs:{center:!1,visible:t.flag,"close-on-click-modal":!1,title:"移动分组",width:"400px"},on:{"update:visible":function(e){t.flag=e}}},[a("span",{}),a("div",{staticClass:"group"},[a("div",{staticClass:"label"},[t._v("移动到")]),a("select",{ref:"moveToId",staticClass:"form-control",attrs:{placeholder:"请选择"}},t._l(t.groupList,function(e,i){return e.id!=t.currGroup&&""!=e.id?a("option",{domProps:{value:e.id,textContent:t._s(e.name)}}):t._e()}),0)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.flag=!1}}},[t._v("返回")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v(" 确定  ")])],1)]):t._e()],1)},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},605:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div"},[a("div",{staticClass:"groupWrap"},[a("div",{staticClass:"list"},[a("ul",t._l(t.groupList,function(e){return a("li",{staticClass:"licontent",class:{red:e.id==t.currGroup}},[a("div",{staticClass:"name ellipsis",attrs:{title:e.name+"("+e.num+")"},on:{click:function(a){return t.groupChange(e.id)}}},[a("span",{staticClass:"title"},[t._v(t._s(e.name))]),a("span",[t._v(t._s("("+e.num+")"))])]),""!=e.id&&"non"!=e.id?a("div",{staticClass:"btns"},[a("span",{on:{click:function(a){return t.updateGroupDialog(e)}}},[a("i",{staticClass:"el-icon-edit"})]),a("span",{on:{click:function(a){return t.delGroup(e)}}},[a("i",{staticClass:"el-icon-delete"})])]):t._e()])}),0)]),a("div",{staticClass:"addGroupBtnWrap"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.newGroupDialogOpen=!0}}},[a("i",{staticClass:"el-icon-plus"},[t._v("新建分组")])])],1)]),a("div",{staticClass:"dialogs"},[t.newGroupDialogOpen?a("el-dialog",{attrs:{title:"新增",visible:t.newGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.newGroupDialogOpen=e}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"addGroupForm"},[a("form",{attrs:{id:"addGroupForm"}},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"}})])])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.newGroupDialogOpen=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addGroup}},[t._v("确定")])],1)]):t._e(),t.updateGroupDialogOpen?a("el-dialog",{attrs:{title:"修改",visible:t.updateGroupDialogOpen,width:"500px"},on:{"update:visible":function(e){t.updateGroupDialogOpen=e}}},[a("div",{staticClass:"formWrap"},[a("VaForm",{ref:"updateGroupForm"},[t.currEditGroup?a("form",{attrs:{id:"updateGroupForm"}},[a("div",{staticClass:"group"},[a("input",{directives:[{name:"va",rawName:"v-va",value:{type:"required"},expression:"{ type:'required' }"}],staticClass:"form-control",attrs:{name:"name"},domProps:{value:t.currEditGroup.name}}),a("input",{staticClass:"hide",attrs:{name:"id"},domProps:{value:t.currEditGroup.id}})])]):t._e()])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:function(e){t.updateGroupDialogOpen=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.updateGroup}},[t._v("确定")])],1)]):t._e()],1)])},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})}}]);